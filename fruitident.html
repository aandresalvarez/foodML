<html>
  <head></head>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

<div class="mdl-layout mdl-js-layout">
  <header class="mdl-layout__header"><div class="mdl-layout-icon"></div><div class="mdl-layout__header-row"><span class="mdl-layout__title">What The Heck Kinda Food is This?</span>
<div class="mdl-layout-spacer"></div>
  </div>
  </header>


<div class="mdl-grid">
  <div class="mdl-cell mdl-cell--1-col"></div>
  <div class="mdl-cell mdl-cell--10-col"> 

   <body>
  <div class="mdl-card">
  <div class="mdl-card__title">
     <h2 class="mdl-card__title-text">Upload any food</h2>
  </div>
  <div class="mdl-card__supporting-text">
  <form>
  <input type="file" onchange="readImage(this)" />
</form>
  </div>
  
</div>


<img id='output'>

<table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp">
    <tbody id="tbody"></tbody>
</table></div>
  <div class="mdl-cell mdl-cell--1-col"></div>
</div>

 
</div>


<script>
    var food = [];
    food["artichoke"]="https://edkrystosik.wixsite.com/mysite/artichoke"
    food["banana"]="https://edkrystosik.wixsite.com/mysite/banana"
    food["apples, red"]="https://edkrystosik.wixsite.com/mysite/applered"
    food["apples, green"]="https://edkrystosik.wixsite.com/mysite/applegreen"
    food["avocado"]="https://edkrystosik.wixsite.com/mysite/avocado"
    food["eggplant"]="https://edkrystosik.wixsite.com/mysite/eggplant"
    food["Artichoke"]="https://edkrystosik.wixsite.com/mysite/artichoke"
    food["potato, white"]="https://edkrystosik.wixsite.com/mysite/potato"
    food["potato, sweet"]="https://edkrystosik.wixsite.com/mysite/artichoke"
    food["ginger"]="https://edkrystosik.wixsite.com/mysite/negative"
    food["Negative"]="https://edkrystosik.wixsite.com/mysite/negative"

  function readImage(element) {
  var file = element.files[0];
  
  var reader = new FileReader();

  reader.onloadend = function() {
      
    $.ajax({
      url: "https://southcentralus.api.cognitive.microsoft.com/customvision/v2.0/Prediction/2f4299da-6c31-476b-936c-117948f4b164/image",
      data: reader.result,
      processData: false,
      contentType: "application/json",
      headers: {
        'Prediction-key': '0242a4df6f5744f0934b4454363c6746'
      },
      type: 'POST',
      success: function(response) {
        var obj = response["predictions"];
//obj= response['predictions'];
        
          
           
      $("#results").html(response);
      //response=JSON.parse(response);
      //$("#results").replaceWith(response);
     var globalCounter = 0;
    var tbody = document.getElementById('tbody');
    for (var i = 0; i < Object.keys(obj).length; i++) {
        var tr = "<tr>";
        tr += "<td class='mdl-data-table__cell--non-numeric'>" + obj[i].tagName + "</td>" + "<td class='mdl-data-table__cell--non-numeric'>" + obj[i].probability.toString() + "</td>" + "<td class='mdl-data-table__cell--non-numeric'><a href='"+food[obj[i].tagName]+"'>What can I prepare with this?</a></td></tr>";
        tbody.innerHTML += tr;
    }





      },
      error: function(error) {
        alert('error: ' + error);
      }
    });
  }
  reader.readAsArrayBuffer(file);
}
</script>


</body>
</html>